import{f as O,u as w,a as U,j as e,B as P,c as V,r as ye,p as Ce,U as fe,T as ve,L as we,g as Z,h as be,i as Se,k as je,l as ze,m as ke,d as z,N as Ne,b as Me,e as Ee}from"./index-Cdz5utp5.js";import{u as Re}from"./useRouteContext-BtNL6K8e.js";import{u as _e,a as De,I as B,b as T}from"./InputBase-D9JyYzVl.js";var k={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const H={orientation:"horizontal"},Ae=V((o,{borderWidth:t})=>({group:{"--ai-border-width":ye(t)}})),X=O((o,t)=>{const i=w("ActionIconGroup",H,o),{className:n,style:u,classNames:l,styles:d,unstyled:r,orientation:h,vars:c,borderWidth:g,variant:I,mod:x,...s}=w("ActionIconGroup",H,o),p=U({name:"ActionIconGroup",props:i,classes:k,className:n,style:u,classNames:l,styles:d,unstyled:r,vars:c,varsResolver:Ae,rootSelector:"group"});return e.jsx(P,{...p("group"),ref:t,variant:I,mod:[{"data-orientation":h},x],role:"group",...s})});X.classes=k;X.displayName="@mantine/core/ActionIconGroup";const Le={},Je=V((o,{size:t,radius:i,variant:n,gradient:u,color:l,autoContrast:d})=>{const r=o.variantColorResolver({color:l||o.primaryColor,theme:o,gradient:u,variant:n||"filled",autoContrast:d});return{root:{"--ai-size":Z(t,"ai-size"),"--ai-radius":i===void 0?void 0:be(i),"--ai-bg":l||n?r.background:void 0,"--ai-hover":l||n?r.hover:void 0,"--ai-hover-color":l||n?r.hoverColor:void 0,"--ai-color":r.color,"--ai-bd":l||n?r.border:void 0}}}),N=Ce((o,t)=>{const i=w("ActionIcon",Le,o),{className:n,unstyled:u,variant:l,classNames:d,styles:r,style:h,loading:c,loaderProps:g,size:I,color:x,radius:s,__staticSelector:p,gradient:b,vars:f,children:S,disabled:C,"data-disabled":j,autoContrast:q,mod:M,...E}=i,v=U({name:["ActionIcon",p],props:i,className:n,style:h,classes:k,classNames:d,styles:r,unstyled:u,vars:f,varsResolver:Je});return e.jsxs(fe,{...v("root",{active:!C&&!c&&!j}),...E,unstyled:u,variant:l,size:I,disabled:C||c,ref:t,mod:[{loading:c,disabled:C||j},M],children:[e.jsx(ve,{mounted:!!c,transition:"slide-down",duration:150,children:R=>e.jsx(P,{component:"span",...v("loader",{style:R}),"aria-hidden":!0,children:e.jsx(we,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...g})})}),e.jsx(P,{component:"span",mod:{loading:c},...v("icon"),children:S})]})});N.classes=k;N.displayName="@mantine/core/ActionIcon";N.Group=X;const Pe=({reveal:o})=>e.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--psi-icon-size)",height:"var(--psi-icon-size)"},children:e.jsx("path",{d:o?"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z":"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})});var F={root:"m_f61ca620",input:"m_ccf8da4c",innerInput:"m_f2d85dd2",visibilityToggle:"m_b1072d44"};const Ze={visibilityToggleIcon:Pe},Fe=V((o,{size:t})=>({root:{"--psi-icon-size":Z(t,"psi-icon-size"),"--psi-button-size":Z(t,"psi-button-size")}})),G=O((o,t)=>{const i=w("PasswordInput",Ze,o),{classNames:n,className:u,style:l,styles:d,unstyled:r,vars:h,required:c,error:g,leftSection:I,disabled:x,id:s,variant:p,inputContainer:b,description:f,label:S,size:C,errorProps:j,descriptionProps:q,labelProps:M,withAsterisk:E,inputWrapperOrder:v,wrapperProps:R,radius:K,rightSection:ee,rightSectionWidth:se,rightSectionPointerEvents:oe,leftSectionWidth:te,visible:ae,defaultVisible:ne,onVisibilityChange:re,visibilityToggleIcon:ie,visibilityToggleButtonProps:a,rightSectionProps:le,leftSectionProps:ce,leftSectionPointerEvents:de,withErrorStyles:pe,mod:ue,...me}=i,_=Se(s),[D,he]=_e({value:ae,defaultValue:ne,finalValue:!1,onChange:re}),A=()=>he(!D),L=U({name:"PasswordInput",classes:F,props:i,className:u,style:l,classNames:n,styles:d,unstyled:r,vars:h,varsResolver:Fe}),{resolvedClassNames:J,resolvedStyles:W}=De({classNames:n,styles:d,props:i}),{styleProps:ge,rest:Y}=je(me),Ie=ie,xe=e.jsx(N,{...L("visibilityToggle"),disabled:x,radius:K,"aria-hidden":!a,tabIndex:-1,...a,variant:"subtle",color:"gray",unstyled:r,onTouchEnd:m=>{var y;m.preventDefault(),(y=a==null?void 0:a.onTouchEnd)==null||y.call(a,m),A()},onMouseDown:m=>{var y;m.preventDefault(),(y=a==null?void 0:a.onMouseDown)==null||y.call(a,m),A()},onKeyDown:m=>{var y;(y=a==null?void 0:a.onKeyDown)==null||y.call(a,m),m.key===" "&&(m.preventDefault(),A())},children:e.jsx(Ie,{reveal:D})});return e.jsx(B.Wrapper,{required:c,id:_,label:S,error:g,description:f,size:C,classNames:J,styles:W,__staticSelector:"PasswordInput",errorProps:j,descriptionProps:q,unstyled:r,withAsterisk:E,inputWrapperOrder:v,inputContainer:b,variant:p,labelProps:{...M,htmlFor:_},mod:ue,...L("root"),...ge,...R,children:e.jsx(B,{component:"div",error:g,leftSection:I,size:C,classNames:{...J,input:ze(F.input,J.input)},styles:W,radius:K,disabled:x,__staticSelector:"PasswordInput",rightSectionWidth:se,rightSection:ee??xe,variant:p,unstyled:r,leftSectionWidth:te,rightSectionPointerEvents:oe||"all",rightSectionProps:le,leftSectionProps:ce,leftSectionPointerEvents:de,withAria:!1,withErrorStyles:pe,children:e.jsx("input",{required:c,"data-invalid":!!g||void 0,"data-with-left-section":!!I||void 0,...L("innerInput"),disabled:x,id:_,ref:t,...Y,autoComplete:Y.autoComplete||"off",type:D?"text":"password"})})})});G.classes={...T.classes,...F};G.displayName="@mantine/core/PasswordInput";const Oe={},$=O((o,t)=>{const i=w("TextInput",Oe,o);return e.jsx(T,{component:"input",ref:t,...i,__staticSelector:"TextInput"})});$.classes=T.classes;$.displayName="@mantine/core/TextInput";const Ue="https://nyxkyrlcppkrsubvkytj.supabase.co",Ve="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55eGt5cmxjcHBrcnN1YnZreXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MjYzMzksImV4cCI6MjA0NzUwMjMzOX0.BUMwwqrzX0kdxKvVf7jd7p31BwDxDf0ZdilcfLh7WlA",Te=ke(Ue,Ve),Xe={backgroundColor:"#F59F00",marginTop:"40px",color:"black"},Q={width:"690px",marginTop:"55px",color:"#364FC7"};function Ge(){const o=Re({from:"/login"}),[t,i]=z.useState(""),[n,u]=z.useState(""),[l,d]=z.useState(""),[r,h]=z.useState("");async function c(){const{data:s,error:p}=await Te.auth.signInWithPassword({email:t,password:n}).then();o.setUserInfo(s),console.log("data",s),localStorage.setItem("token",JSON.stringify(s));const b=Date.now()+3e6;localStorage.setItem("tokenTime",b),p!=null&&(console.log("error",p),d(p.message),h(p.message));const f=new Date().toISOString().split("T")[0];await fetch(`https://nyxkyrlcppkrsubvkytj.supabase.co/rest/v1/currentBookings?user_id=eq.${s.user.id}&bookingDate=lt.${f}`,{method:"DELETE",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55eGt5cmxjcHBrcnN1YnZreXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MjYzMzksImV4cCI6MjA0NzUwMjMzOX0.BUMwwqrzX0kdxKvVf7jd7p31BwDxDf0ZdilcfLh7WlA",Authorization:`Bearer ${s.session.access_token}`}}),window.location.href="/"}const g=s=>{s.preventDefault(),console.log(t,n),c()};function I(s){i(s.target.value),d(null)}function x(s){u(s.target.value),h(null)}return Date.now()<localStorage.getItem("tokenTime")?(o.setUserInfo(JSON.parse(localStorage.getItem("token"))),console.log("token not expired"),console.log(JSON.parse(localStorage.getItem("token"))),e.jsx(Ne,{to:"/"})):(console.log("token expired"),e.jsxs("div",{children:[e.jsx("h1",{style:{color:"#364FC7"},children:"Login"}),e.jsxs("form",{children:[e.jsx($,{size:"xl",radius:"xs",label:"Mail",placeholder:"cph-business mail",type:"text",value:t,onChange:s=>I(s),style:Q,error:l,required:!0}),e.jsx(G,{size:"xl",radius:"xs",label:"Kode",placeholder:"Adgangskode",value:n,onChange:s=>x(s),type:"password",style:Q,error:r,required:!0}),e.jsx(Me,{type:"submit",onClick:g,variant:"filled",color:"#F08C00",size:"xl",radius:"md",style:Xe,children:"LOGIN"})]})]}))}const Be=Ee("/login")({component:qe}),$e={display:"flex",marginLeft:"138px",marginRight:"612px",marginTop:"181px",backgroundColor:"#D0EBFF"};function qe(){return e.jsxs("div",{style:$e,children:[e.jsx(Ge,{}),e.jsx("img",{style:{width:"449px",height:"427px",marginTop:"15px"},src:"img/login-illustation.png",alt:"Illustration"})]})}export{Be as Route};
