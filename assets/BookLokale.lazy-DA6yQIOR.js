import{n as he,f as re,u as le,o as A,j as e,U as xe,q as ae,T as ke,L as Q,a as be,d as j,B as ee,c as ye,s as je,g as ve,r as Ie,t as te,h as Se,v as Te,w as ce,b as J,R as B,C as we,e as Ce,N as Pe}from"./index-CLUF5fww.js";import{u as $}from"./useRouteContext-7sMlSsiM.js";import{C as ze}from"./CheckIcon-BnDteJmh.js";function Be(t,n){return typeof t=="boolean"?t:n.autoContrast}const[Oe,Le]=he("Stepper component was not found in tree"),M=()=>null;M.displayName="@mantine/core/StepperCompleted";var V={root:"m_cbb4ea7e",steps:"m_aaf89d0b",separator:"m_2a371ac9",content:"m_78da155d",step:"m_cbb57068","step--horizontal":"m_f56b1e2c","step--vertical":"m_833edb7e",verticalSeparator:"m_6496b3f3",stepWrapper:"m_818e70b",stepIcon:"m_1959ad01",stepCompletedIcon:"m_a79331dc",stepBody:"m_1956aa2a",stepLabel:"m_12051f6c",stepDescription:"m_164eea74"};const F=(t,n)=>typeof t=="function"?e.jsx(t,{step:n||0}):t,_e={withIcon:!0,allowStepClick:!0,iconPosition:"left"},X=re((t,n)=>{const{classNames:o,className:s,style:i,styles:c,vars:r,step:l,state:a,color:m,icon:d,completedIcon:p,progressIcon:h,label:y,description:x,withIcon:g,iconSize:u,loading:S,allowStepClick:f,allowStepSelect:v,iconPosition:C,orientation:L,mod:O,..._}=le("StepperStep",_e,t),b=Le(),q=A(),k={classNames:o,styles:c},D=a==="stepCompleted"?null:a==="stepProgress"?h:d,P={"data-progress":a==="stepProgress"||void 0,"data-completed":a==="stepCompleted"||void 0};return e.jsxs(xe,{...b.getStyles("step",{className:s,style:i,variant:b.orientation,...k}),mod:[{"icon-position":C||b.iconPosition,"allow-click":f},O],ref:n,...P,..._,__vars:{"--step-color":m?ae(m,q):void 0},tabIndex:f?0:-1,children:[g&&e.jsxs("span",{...b.getStyles("stepWrapper",k),children:[e.jsxs("span",{...b.getStyles("stepIcon",k),...P,children:[e.jsx(ke,{mounted:a==="stepCompleted",transition:"pop",duration:200,children:N=>e.jsx("span",{...b.getStyles("stepCompletedIcon",{style:N,...k}),children:S?e.jsx(Q,{color:"var(--mantine-color-white)",size:"calc(var(--stepper-icon-size) / 2)",...b.getStyles("stepLoader",k)}):F(p,l)||e.jsx(ze,{size:"60%"})})}),a!=="stepCompleted"?S?e.jsx(Q,{...b.getStyles("stepLoader",k),size:"calc(var(--stepper-icon-size) / 2)",color:m}):F(D||d,l):null]}),L==="vertical"&&e.jsx("span",{...b.getStyles("verticalSeparator",k),"data-active":a==="stepCompleted"||void 0})]}),(y||x)&&e.jsxs("span",{...b.getStyles("stepBody",k),"data-orientation":b.orientation,"data-icon-position":C||b.iconPosition,children:[y&&e.jsx("span",{...b.getStyles("stepLabel",k),children:F(y,l)}),x&&e.jsx("span",{...b.getStyles("stepDescription",k),children:F(x,l)})]})]})});X.classes=V;X.displayName="@mantine/core/StepperStep";const Ne={orientation:"horizontal",iconPosition:"left",allowNextStepsSelect:!0,wrap:!0},De=ye((t,{color:n,iconSize:o,size:s,contentPadding:i,radius:c,autoContrast:r})=>({root:{"--stepper-color":n?ae(n,t):void 0,"--stepper-icon-color":Be(r,t)?je({color:n,theme:t,autoContrast:r}):void 0,"--stepper-icon-size":o===void 0?ve(s,"stepper-icon-size"):Ie(o),"--stepper-content-padding":te(i),"--stepper-radius":c===void 0?void 0:Se(c),"--stepper-fz":Te(s),"--stepper-spacing":te(s)}})),w=re((t,n)=>{var K,Z,U;const o=le("Stepper",Ne,t),{classNames:s,className:i,style:c,styles:r,unstyled:l,vars:a,children:m,onStepClick:d,active:p,icon:h,completedIcon:y,progressIcon:x,color:g,iconSize:u,contentPadding:S,orientation:f,iconPosition:v,size:C,radius:L,allowNextStepsSelect:O,wrap:_,autoContrast:b,...q}=o,k=be({name:"Stepper",classes:V,props:o,className:i,style:c,classNames:s,styles:r,unstyled:l,vars:a,varsResolver:De}),D=j.Children.toArray(m),P=D.filter(z=>z.type!==M),N=D.find(z=>z.type===M),ge=P.reduce((z,T,I)=>{const Y=p===I?"stepProgress":p>I?"stepCompleted":"stepInactive",H=typeof d!="function"?!1:typeof T.props.allowStepSelect=="boolean"?T.props.allowStepSelect:Y==="stepCompleted"||O;return z.push(j.cloneElement(T,{icon:T.props.icon||h||I+1,key:I,step:I,state:Y,onClick:()=>H&&(d==null?void 0:d(I)),allowStepClick:H,completedIcon:T.props.completedIcon||y,progressIcon:T.props.progressIcon||x,color:T.props.color||g,iconSize:u,radius:L,iconPosition:T.props.iconPosition||v,orientation:f,unstyled:l})),f==="horizontal"&&I!==P.length-1&&z.push(j.createElement("div",{...k("separator"),"data-active":I<p||void 0,"data-orientation":f,key:`separator-${I}`})),z},[]),fe=(Z=(K=P[p])==null?void 0:K.props)==null?void 0:Z.children,me=(U=N==null?void 0:N.props)==null?void 0:U.children,G=p>P.length-1?me:fe;return e.jsx(Oe,{value:{getStyles:k,orientation:f,iconPosition:v},children:e.jsxs(ee,{...k("root"),ref:n,size:C,...q,children:[e.jsx(ee,{...k("steps"),mod:{orientation:f,"icon-position":v,wrap:_&&f!=="vertical"},children:ge}),G&&e.jsx("div",{...k("content"),children:G})]})})});w.classes=V;w.displayName="@mantine/core/Stepper";w.Completed=M;w.Step=X;function Fe({lokale:t,starttid:n,sluttid:o,date:s}){const i={display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:" 3"},c={display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",backgroundColor:"#FFF",bordorRadius:"8px",padding:"26px 55px",width:"762px"},r={backgroundColor:"#F59F00",marginTop:"29px",color:"black"};return e.jsx("div",{style:i,children:e.jsxs("div",{style:c,children:[e.jsxs("h1",{style:{color:"#2B8A3E"},children:[e.jsx("img",{style:{width:"50px",height:"50px",marginRight:"20px"},src:"img/check.svg",alt:""}),"Booking bekræftet"]}),e.jsxs("p",{children:["Lokale: ",e.jsx("b",{children:t})]}),e.jsxs("p",{children:["Dato: ",e.jsx("b",{children:s})]}),e.jsxs("p",{children:["Tidspunkt: ",e.jsxs("b",{children:[n," - ",o]})]}),e.jsx("p",{children:"Vær opmærksom på at hvis du er studerende kan få din booking overskrevet  af en underviser, hvis der er mere end 24 timer til din booking. Du vil få en mail med begrundelse for aflysningen. "}),e.jsx("br",{}),e.jsx("p",{children:"Er der under 24 timer til din booking og en underviser vil booke lokalet, vil du få en mail med en anmodning om at overtage bookingen. Du må selv bestemme om du vil beholde eller overgive bookingen."}),e.jsx(ce,{to:"/ownBooking",children:e.jsx(J,{type:"submit",variant:"filled",color:"#F08C00",size:"xl",adius:"md",style:r,children:"Mine bookinger"})})]})})}const Me={width:"45%",padding:"10px 0"};function Ee({setStepper:t,start:n,end:o,status:s,lokale:i,setActiveBooking:c,activeBooking:r,setSelectedInfo:l}){const a=$({from:"/BookLokale"});let m="green";const d=i+"-"+n,p=()=>{m=="green"?(t("2"),c(d),l({lokale:i,startTime:n,endTime:o,isTeacher:!1})):m=="yellow"&&a.userInfo.userdata.isTeacher&&(t("2"),c(d),l({lokale:i,startTime:n,endTime:o,isTeacher:!0}))};return s=="optaget"?m="yellow":s=="teacher"&&(m="red"),e.jsx("div",{style:Me,id:d,children:e.jsxs(J,{style:{width:"100%"},color:r==d?"cyan":m,onClick:()=>p(),children:[" ",n," - ",o]})})}var pe={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},oe=B.createContext&&B.createContext(pe),Re=["attr","size","title"];function Ae(t,n){if(t==null)return{};var o=Je(t,n),s,i;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(i=0;i<c.length;i++)s=c[i],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(o[s]=t[s])}return o}function Je(t,n){if(t==null)return{};var o={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(n.indexOf(s)>=0)continue;o[s]=t[s]}return o}function E(){return E=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},E.apply(this,arguments)}function ne(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),o.push.apply(o,s)}return o}function R(t){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?ne(Object(o),!0).forEach(function(s){$e(t,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ne(Object(o)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(o,s))})}return t}function $e(t,n,o){return n=qe(n),n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}function qe(t){var n=Ve(t,"string");return typeof n=="symbol"?n:n+""}function Ve(t,n){if(typeof t!="object"||!t)return t;var o=t[Symbol.toPrimitive];if(o!==void 0){var s=o.call(t,n||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function de(t){return t&&t.map((n,o)=>B.createElement(n.tag,R({key:o},n.attr),de(n.child)))}function W(t){return n=>B.createElement(Xe,E({attr:R({},t.attr)},n),de(t.child))}function Xe(t){var n=o=>{var{attr:s,size:i,title:c}=t,r=Ae(t,Re),l=i||o.size||"1em",a;return o.className&&(a=o.className),t.className&&(a=(a?a+" ":"")+t.className),B.createElement("svg",E({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},o.attr,s,r,{className:a,style:R(R({color:t.color||o.color},o.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),c&&B.createElement("title",null,c),t.children)};return oe!==void 0?B.createElement(oe.Consumer,null,o=>n(o)):n(pe)}function ue(t){return W({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"40",d:"M196 220h64v172"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"40",d:"M187 396h138"},child:[]},{tag:"path",attr:{d:"M256 160a32 32 0 1 1 32-32 32 32 0 0 1-32 32z"},child:[]}]})(t)}function We({onClose:t}){const n=A(),o={display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:" 3"},s={display:"flex",flexDirection:"column",backgroundColor:"#FFF",bordorRadius:"8px",padding:"12px 16px",width:"422px"},i={borderColor:"red",width:"fit-content",justifySelf:"right"};return e.jsx("div",{style:o,children:e.jsxs("div",{style:s,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("h2",{style:{margin:"0",color:n.colors.red[9]},children:"Farverne betyder"}),e.jsxs("span",{children:[e.jsx("button",{style:i,children:e.jsx(ue,{style:{color:"red",fontSize:"24px"}})}),e.jsx(we,{onClick:t})]})]}),e.jsxs("ul",{style:{listStyle:"none",padding:"0"},children:[e.jsxs("li",{style:{display:"flex"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:n.colors.green[8],margin:"0 10px",borderRadius:"50%"}}),"Lokalet er frit"]}),e.jsxs("li",{style:{display:"flex"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:n.colors.yellow[8],margin:"0 10px",borderRadius:"50%"}}),"Booket af en studerende"]}),e.jsxs("li",{style:{display:"flex"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:n.colors.red[8],margin:"0 10px",borderRadius:"50%"}}),"Booket af en underviser"]}),e.jsxs("li",{style:{display:"flex"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:n.colors.cyan[8],margin:"0 10px",borderRadius:"50%"}}),"Din valgte booking"]})]})]})})}function se(t){return W({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function ie(t){return W({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function Ge({lokale:t}){const[n,o]=j.useState(0),i={"3.9 Open Learning":["img/lokale3-9.jpg","img/lokale3-9-2.jpg","img/lokale3-9-3.jpg"],"3.2":["img/lokale3-2.jpg","img/lokale3-2-2.jpg"],"2.21":["img/lokale-2-21.JPG","img/lokale-2-21-2.JPG","img/lokale-2-21-3.JPG","img/lokale-2-21-4.JPG"]}[t]||[],c=()=>{o((n+1)%i.length)},r=()=>{o((n-1+i.length)%i.length)};return i.length===0?e.jsxs("div",{children:[e.jsx("div",{style:{width:"300px",height:"200px",display:"flex",overflow:"hidden"},children:e.jsx("img",{style:{width:"300px",height:"200px"},src:"img/lokale3-9.jpg",alt:"Image of lokale empty"})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"364px",position:"relative",bottom:"100px",right:"32px"},children:[e.jsx("button",{className:"Chevron-Knap",onClick:r,children:e.jsx(se,{})}),e.jsx("button",{className:"Chevron-Knap",onClick:c,children:e.jsx(ie,{})})]})]}):e.jsxs("div",{children:[e.jsx("div",{style:{width:"300px",height:"200px",display:"flex",overflow:"hidden"},children:e.jsx("img",{style:{width:"300px",height:"200px"},src:i[n],alt:`Image of lokale ${t}`})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"364px",position:"relative",bottom:"100px",right:"32px"},children:[e.jsx("button",{className:"Chevron-Knap",onClick:r,children:e.jsx(se,{})}),e.jsx("button",{className:"Chevron-Knap",onClick:c,children:e.jsx(ie,{})})]})]})}function Ke({lokale:t,starttid:n,sluttid:o,date:s}){const i={display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",backgroundColor:"#FFF",bordorRadius:"8px",padding:"26px 55px",width:"762px",position:"fixed",top:"10%",left:"23%",zIndex:"3"},c={backgroundColor:"#F59F00",marginTop:"29px",color:"black"};return e.jsx("div",{children:e.jsxs("div",{style:i,children:[e.jsxs("h1",{style:{color:"#2B8A3E"},children:[e.jsx("img",{style:{width:"50px",height:"50px",marginRight:"20px"},src:"img/check.svg",alt:"godtkent mærke"}),"Booking bekræftet"]}),e.jsxs("p",{children:["Lokale: ",e.jsx("b",{children:t})]}),e.jsxs("p",{children:["Dato: ",e.jsx("b",{children:s})]}),e.jsxs("p",{children:["Tidspunkt: ",e.jsxs("b",{children:[n," - ",o]})]}),e.jsx("p",{children:"Din booking har nu overskrevet en andens, og der bliver sendt en besked til vedkommende."}),e.jsx(ce,{to:"/ownBooking",children:e.jsx(J,{type:"submit",variant:"filled",color:"#F08C00",size:"xl",radius:"md",style:c,children:"Mine bookinger"})})]})})}const Ze={display:"flex",borderRadius:"9px",background:"#A5D8FF",width:"1164px",padding:"0 35px 26px 30px",position:"relative",justifyContent:"space-between"};function Ue({setStepper:t,lokale:n,times:o,setActiveBooking:s,activeBooking:i}){const c=A(),r=$({from:"/BookLokale"}),[l,a]=j.useState({lokale:n,startTime:r.bookingInfo.startTime,endTime:r.bookingInfo.endTime}),[m,d]=j.useState(!1),[p,h]=j.useState(!1),y=()=>{d(!m)},x=()=>{h(!p)};async function g(){if(l.startTime==null||l.startTime==null||l.startTime==""){alert("Vælg venligst en tid");return}const v="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55eGt5cmxjcHBrcnN1YnZreXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MjYzMzksImV4cCI6MjA0NzUwMjMzOX0.BUMwwqrzX0kdxKvVf7jd7p31BwDxDf0ZdilcfLh7WlA";if(l.isTeacher){const O=await fetch(`https://nyxkyrlcppkrsubvkytj.supabase.co/rest/v1/currentBookings?roomNumber=eq.${l.lokale}&bookingDate=eq.${r.bookingInfo.date}&startTime=eq.${l.startTime}:00`,{method:"PATCH",body:JSON.stringify({email:r.userInfo.user.email,user_id:r.userInfo.user.id,isTeacher:!0}),headers:{"Content-Type":"application/json",Accept:"application/json",apikey:v,Authorization:`Bearer ${r.userInfo.session.access_token}`,Prefer:"return=representation"}}),_=await O.json();if(console.log(_),O.ok){x();return}}const C=await fetch("https://nyxkyrlcppkrsubvkytj.supabase.co/rest/v1/currentBookings",{method:"POST",body:JSON.stringify({email:r.userInfo.user.email,user_id:r.userInfo.user.id,isTeacher:r.userInfo.userdata.isTeacher,bookingDate:r.bookingInfo.date,floor:r.bookingInfo.etage,startTime:l.startTime+":00",endTime:l.endTime+":00",roomNumber:l.lokale}),headers:{"Content-Type":"application/json",Accept:"application/json",apikey:v,Authorization:`Bearer ${r.userInfo.session.access_token}`,Prefer:"return=representation"}}),L=await C.json();console.log(L),C.ok&&y()}j.useEffect(()=>{r.bookingInfo.startTime!=""&&t("2")},[]);const[u,S]=j.useState(!1),f=()=>{S(!u)};return e.jsxs("div",{style:Ze,children:[m&&e.jsx(Fe,{onClose:y,lokale:l.lokale,starttid:l.startTime,sluttid:l.endTime,date:r.bookingInfo.date}),p&&e.jsx(Ke,{onClose:x,lokale:l.lokale,starttid:l.startTime,sluttid:l.endTime,date:r.bookingInfo.date}),u&&e.jsx(We,{onClose:f}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("h2",{style:{color:c.colors.indigo[9],width:"250px"},children:["Grupperum - ",n]}),e.jsx(Ge,{lokale:n})]}),e.jsxs("div",{style:{width:"400px"},children:[e.jsx("h2",{children:"Ledige tider"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"10%"},children:o.map(v=>e.jsx(Ee,{start:v.startTime,end:v.endTime,status:v.bookingStatus,setStepper:t,setActiveBooking:s,activeBooking:i,lokale:n,setSelectedInfo:a},n+v.endTime))})]}),e.jsx("div",{style:{alignSelf:"center"},children:e.jsx(J,{style:{alignSelf:"center"},onClick:g,className:"BookLokale",radius:"md",size:"xl",color:"indigo",children:"Book lokale"})}),e.jsxs("div",{style:{position:"absolute",top:"10px",right:"35px",display:"flex",alignItems:"center"},children:[e.jsx("p",{style:{color:c.colors.blue[8],fontWeight:"bold"},children:"Hvad betyder farverne ?"}),e.jsx("button",{style:{borderColor:"red",marginLeft:"10px"},onClick:f,children:e.jsx(ue,{style:{color:"red",fontSize:"24px"}})})]})]})}function Ye({setStepper:t}){const n=A(),o=$({from:"/BookLokale"}),[s,i]=j.useState([]),[c,r]=j.useState(null);async function l(){var a="";const m="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55eGt5cmxjcHBrcnN1YnZreXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MjYzMzksImV4cCI6MjA0NzUwMjMzOX0.BUMwwqrzX0kdxKvVf7jd7p31BwDxDf0ZdilcfLh7WlA";o.bookingInfo.lokale==null||o.bookingInfo.lokale==null||o.bookingInfo.lokale==""?a=await fetch(`https://nyxkyrlcppkrsubvkytj.supabase.co/rest/v1/currentBookings?bookingDate=eq.${o.bookingInfo.date}&floor=eq.${o.bookingInfo.etage}`,{headers:{apikey:m,Authorization:`Bearer ${o.userInfo.session.access_token}`,Prefer:"return=representation","content-type":"application/json"}}):a=await fetch(`https://nyxkyrlcppkrsubvkytj.supabase.co/rest/v1/currentBookings?bookingDate=eq.${o.bookingInfo.date}&floor=eq.${o.bookingInfo.etage}&roomNumber=eq.${o.bookingInfo.lokale}`,{headers:{apikey:m,Authorization:`Bearer ${o.userInfo.session.access_token}`,Prefer:"return=representation","content-type":"application/json"}});const d=await a.json();console.log("data",d);const p=[{lokale:"Audiotoriet",etage:"1"},{lokale:"Lobbyen",etage:"1"},{lokale:"3D print",etage:"1"},{lokale:"Medialab",etage:"2"},{lokale:"2.21",etage:"2"},{lokale:"3.1",etage:"3"},{lokale:"3.2",etage:"3"},{lokale:"3.4",etage:"3"},{lokale:"3.5",etage:"3"},{lokale:"3.6",etage:"3"},{lokale:"3.7",etage:"3"},{lokale:"3.9 Open Learning",etage:"3"},{lokale:"3.10",etage:"3"},{lokale:"3.11",etage:"3"},{lokale:"4.1",etage:"4"},{lokale:"4.2",etage:"4"},{lokale:"4.3",etage:"4"}],h=[{startTime:"08:30",endTime:"09:30"},{startTime:"09:30",endTime:"10:30"},{startTime:"10:30",endTime:"11:30"},{startTime:"11:30",endTime:"12:30"},{startTime:"12:30",endTime:"13:30"},{startTime:"13:30",endTime:"14:30"},{startTime:"14:30",endTime:"15:30"},{startTime:"15:30",endTime:"16:30"}],y=[];let x=[];if(d.length===0){for(let g=0;g<p.length;g++)if(p[g].etage==o.bookingInfo.etage&&(p[g].lokale==o.bookingInfo.lokale||o.bookingInfo.lokale=="")){for(let u=0;u<h.length;u++)x.push({startTime:h[u].startTime,endTime:h[u].endTime,bookingStatus:"ledig"});y.push({lokale:p[g].lokale,ableTimes:x}),x=[]}}else for(let g=0;g<p.length;g++)if(p[g].etage==o.bookingInfo.etage&&(p[g].lokale==o.bookingInfo.lokale||o.bookingInfo.lokale=="")){x=[];for(let u=0;u<h.length;u++){let S=!1;for(let f=0;f<d.length;f++)if(h[u].startTime==d[f].startTime.slice(0,-3)&&p[g].lokale==d[f].roomNumber){d[f].isTeacher?x.push({startTime:h[u].startTime,endTime:h[u].endTime,bookingStatus:"teacher"}):x.push({startTime:h[u].startTime,endTime:h[u].endTime,bookingStatus:"optaget"}),S=!0;break}S||x.push({startTime:h[u].startTime,endTime:h[u].endTime,bookingStatus:"ledig"})}y.push({lokale:p[g].lokale,ableTimes:x})}console.log(y),i(y)}return j.useEffect(()=>{l(),(o.bookingInfo.startTime!=null||o.bookingInfo.startTime!=null||o.bookingInfo.startTime!="")&&r(o.bookingInfo.lokale+"-"+o.bookingInfo.startTime)},[]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"50px"},children:[e.jsxs("h1",{style:{color:n.colors.indigo[9]},children:[o.bookingInfo.etage,". Etage og tider for den ",o.bookingInfo.date]}),s.map(a=>e.jsx(Ue,{lokale:a.lokale,times:a.ableTimes,setStepper:t,activeBooking:c,setActiveBooking:r},a.lokale+a.ableTimes.startTime))]})}const He="_separator_141uf_3",Qe="_stepIcon_141uf_35",et="_step_141uf_35",tt={separator:He,stepIcon:Qe,step:et},ot={width:"700px"};function nt({active:t}){return e.jsx("div",{children:e.jsxs(w,{style:ot,classNames:tt,active:t,children:[e.jsx(w.Step,{description:"Valg af sal og lokale"}),e.jsx(w.Step,{description:"Vælg tidspunkt"}),e.jsx(w.Step,{description:"Booking færdig"})]})})}const ct=Ce("/BookLokale")({component:st});function st(){const[t,n]=j.useState("1"),o=$({from:"/BookLokale"});return o.bookingInfo==null||o.bookingInfo==null||o.bookingInfo==""?e.jsx("div",{children:e.jsx(Pe,{to:"/"})}):e.jsxs("div",{style:{margin:"50px auto 0 auto",width:"1164px"},children:[e.jsx(nt,{active:t}),e.jsx(Ye,{setStepper:n})]})}export{ct as Route};
