import{n as ge,f as se,u as ie,o as E,j as e,U as me,q as re,T as fe,L as Q,a as he,d as j,B as ee,c as xe,s as ye,g as be,r as ke,t as te,h as je,v as ve,w as Ie,b as X,R as O,C as Se,e as we,N as Ce}from"./index-CzWe3yZ9.js";import{u as R}from"./useRouteContext-CnSx2eOs.js";import{C as Te}from"./CheckIcon-BhB8SHjd.js";function Oe(t,o){return typeof t=="boolean"?t:o.autoContrast}const[ze,Pe]=ge("Stepper component was not found in tree"),N=()=>null;N.displayName="@mantine/core/StepperCompleted";var W={root:"m_cbb4ea7e",steps:"m_aaf89d0b",separator:"m_2a371ac9",content:"m_78da155d",step:"m_cbb57068","step--horizontal":"m_f56b1e2c","step--vertical":"m_833edb7e",verticalSeparator:"m_6496b3f3",stepWrapper:"m_818e70b",stepIcon:"m_1959ad01",stepCompletedIcon:"m_a79331dc",stepBody:"m_1956aa2a",stepLabel:"m_12051f6c",stepDescription:"m_164eea74"};const _=(t,o)=>typeof t=="function"?e.jsx(t,{step:o||0}):t,Be={withIcon:!0,allowStepClick:!0,iconPosition:"left"},K=se((t,o)=>{const{classNames:n,className:s,style:i,styles:c,vars:l,step:p,state:r,color:b,icon:d,completedIcon:u,progressIcon:g,label:k,description:h,withIcon:m,iconSize:a,loading:w,allowStepClick:f,allowStepSelect:P,iconPosition:B,orientation:F,mod:A,...J}=ie("StepperStep",Be,t),y=Pe(),V=E(),x={classNames:n,styles:c},L=r==="stepCompleted"?null:r==="stepProgress"?g:d,C={"data-progress":r==="stepProgress"||void 0,"data-completed":r==="stepCompleted"||void 0};return e.jsxs(me,{...y.getStyles("step",{className:s,style:i,variant:y.orientation,...x}),mod:[{"icon-position":B||y.iconPosition,"allow-click":f},A],ref:o,...C,...J,__vars:{"--step-color":b?re(b,V):void 0},tabIndex:f?0:-1,children:[m&&e.jsxs("span",{...y.getStyles("stepWrapper",x),children:[e.jsxs("span",{...y.getStyles("stepIcon",x),...C,children:[e.jsx(fe,{mounted:r==="stepCompleted",transition:"pop",duration:200,children:z=>e.jsx("span",{...y.getStyles("stepCompletedIcon",{style:z,...x}),children:w?e.jsx(Q,{color:"var(--mantine-color-white)",size:"calc(var(--stepper-icon-size) / 2)",...y.getStyles("stepLoader",x)}):_(u,p)||e.jsx(Te,{size:"60%"})})}),r!=="stepCompleted"?w?e.jsx(Q,{...y.getStyles("stepLoader",x),size:"calc(var(--stepper-icon-size) / 2)",color:b}):_(L||d,p):null]}),F==="vertical"&&e.jsx("span",{...y.getStyles("verticalSeparator",x),"data-active":r==="stepCompleted"||void 0})]}),(k||h)&&e.jsxs("span",{...y.getStyles("stepBody",x),"data-orientation":y.orientation,"data-icon-position":B||y.iconPosition,children:[k&&e.jsx("span",{...y.getStyles("stepLabel",x),children:_(k,p)}),h&&e.jsx("span",{...y.getStyles("stepDescription",x),children:_(h,p)})]})]})});K.classes=W;K.displayName="@mantine/core/StepperStep";const Le={orientation:"horizontal",iconPosition:"left",allowNextStepsSelect:!0,wrap:!0},_e=xe((t,{color:o,iconSize:n,size:s,contentPadding:i,radius:c,autoContrast:l})=>({root:{"--stepper-color":o?re(o,t):void 0,"--stepper-icon-color":Oe(l,t)?ye({color:o,theme:t,autoContrast:l}):void 0,"--stepper-icon-size":n===void 0?be(s,"stepper-icon-size"):ke(n),"--stepper-content-padding":te(i),"--stepper-radius":c===void 0?void 0:je(c),"--stepper-fz":ve(s),"--stepper-spacing":te(s)}})),S=se((t,o)=>{var Y,$,q;const n=ie("Stepper",Le,t),{classNames:s,className:i,style:c,styles:l,unstyled:p,vars:r,children:b,onStepClick:d,active:u,icon:g,completedIcon:k,progressIcon:h,color:m,iconSize:a,contentPadding:w,orientation:f,iconPosition:P,size:B,radius:F,allowNextStepsSelect:A,wrap:J,autoContrast:y,...V}=n,x=he({name:"Stepper",classes:W,props:n,className:i,style:c,classNames:s,styles:l,unstyled:p,vars:r,varsResolver:_e}),L=j.Children.toArray(b),C=L.filter(T=>T.type!==N),z=L.find(T=>T.type===N),pe=C.reduce((T,I,v)=>{const G=u===v?"stepProgress":u>v?"stepCompleted":"stepInactive",H=typeof d!="function"?!1:typeof I.props.allowStepSelect=="boolean"?I.props.allowStepSelect:G==="stepCompleted"||A;return T.push(j.cloneElement(I,{icon:I.props.icon||g||v+1,key:v,step:v,state:G,onClick:()=>H&&(d==null?void 0:d(v)),allowStepClick:H,completedIcon:I.props.completedIcon||k,progressIcon:I.props.progressIcon||h,color:I.props.color||m,iconSize:a,radius:F,iconPosition:I.props.iconPosition||P,orientation:f,unstyled:p})),f==="horizontal"&&v!==C.length-1&&T.push(j.createElement("div",{...x("separator"),"data-active":v<u||void 0,"data-orientation":f,key:`separator-${v}`})),T},[]),de=($=(Y=C[u])==null?void 0:Y.props)==null?void 0:$.children,ue=(q=z==null?void 0:z.props)==null?void 0:q.children,U=u>C.length-1?ue:de;return e.jsx(ze,{value:{getStyles:x,orientation:f,iconPosition:P},children:e.jsxs(ee,{...x("root"),ref:o,size:B,...V,children:[e.jsx(ee,{...x("steps"),mod:{orientation:f,"icon-position":P,wrap:J&&f!=="vertical"},children:pe}),U&&e.jsx("div",{...x("content"),children:U})]})})});S.classes=W;S.displayName="@mantine/core/Stepper";S.Completed=N;S.Step=K;function Ne({name:t}){const o={display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:" 3"},n={display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",backgroundColor:"#FFF",bordorRadius:"4px",padding:"26px 55px",width:"762px"},s={backgroundColor:"#F59F00",marginTop:"29px",color:"black"};return e.jsx("div",{style:o,children:e.jsxs("div",{style:n,children:[e.jsxs("h1",{style:{color:"#2B8A3E"},children:[e.jsx("img",{style:{width:"50px",height:"50px",marginRight:"20px"},src:"img/check.svg",alt:""}),"Bookning bekræftet"]}),e.jsxs("p",{children:["Lokale: ",e.jsx("b",{children:t})]}),e.jsxs("p",{children:["Dato: ",e.jsx("b",{children:"08/12/2024"})]}),e.jsxs("p",{children:["Tidspunkt: ",e.jsx("b",{children:"13:00 - 15:00"})]}),e.jsx("p",{children:"Vær opmærksom på at hvis du er studerende kan få din booking overskrevet  af en underviser, hvis der er mere end 24 timer til din booking. Du vil få en mail med begrundelse for aflysningen. "}),e.jsx("br",{}),e.jsx("p",{children:"Er der under 24 timer til din booking og en underviser vil booke lokalet, vil du få en mail med en anmodning om at overtage bookingen. Du må selv bestemme om du vil beholde eller overgive bookingen."}),e.jsx(Ie,{to:"/ownBooking",children:e.jsx(X,{type:"submit",variant:"filled",color:"#F08C00",size:"xl",adius:"md",style:s,children:"Til forsiden"})})]})})}const Me={width:"45%",padding:"10px 0"};function De({setStepper:t,start:o,end:n,status:s,lokale:i,setActiveBooking:c,activeBooking:l,setSelectedInfo:p}){let r="green";const b=i+"-"+o,d=()=>{r=="green"&&(t("2"),c(b),p({lokale:i,startTime:o,endTime:n}))};return s=="optaget"?r="yellow":s=="teacher"&&(r="red"),e.jsx("div",{style:Me,id:b,children:e.jsxs(X,{style:{width:"100%"},color:l==b?"cyan":r,onClick:()=>d(),children:[" ",o," - ",n]})})}var le={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},oe=O.createContext&&O.createContext(le),Ee=["attr","size","title"];function Re(t,o){if(t==null)return{};var n=Fe(t,o),s,i;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(i=0;i<c.length;i++)s=c[i],!(o.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function Fe(t,o){if(t==null)return{};var n={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(o.indexOf(s)>=0)continue;n[s]=t[s]}return n}function M(){return M=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},M.apply(this,arguments)}function ne(t,o){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);o&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,s)}return n}function D(t){for(var o=1;o<arguments.length;o++){var n=arguments[o]!=null?arguments[o]:{};o%2?ne(Object(n),!0).forEach(function(s){Ae(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Ae(t,o,n){return o=Je(o),o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}function Je(t){var o=Ve(t,"string");return typeof o=="symbol"?o:o+""}function Ve(t,o){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,o||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(t)}function ae(t){return t&&t.map((o,n)=>O.createElement(o.tag,D({key:n},o.attr),ae(o.child)))}function Z(t){return o=>O.createElement(Xe,M({attr:D({},t.attr)},o),ae(t.child))}function Xe(t){var o=n=>{var{attr:s,size:i,title:c}=t,l=Re(t,Ee),p=i||n.size||"1em",r;return n.className&&(r=n.className),t.className&&(r=(r?r+" ":"")+t.className),O.createElement("svg",M({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,l,{className:r,style:D(D({color:t.color||n.color},n.style),t.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),c&&O.createElement("title",null,c),t.children)};return oe!==void 0?O.createElement(oe.Consumer,null,n=>o(n)):o(le)}function ce(t){return Z({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"40",d:"M196 220h64v172"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"40",d:"M187 396h138"},child:[]},{tag:"path",attr:{d:"M256 160a32 32 0 1 1 32-32 32 32 0 0 1-32 32z"},child:[]}]})(t)}function We({onClose:t}){const o=E();R({from:"/BookLokale"});const n={display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:" 3"},s={display:"flex",flexDirection:"column",backgroundColor:"#FFF",bordorRadius:"4px",padding:"12px 16px",width:"422px"},i={borderColor:"red",width:"fit-content",justifySelf:"right"};return e.jsx("div",{style:n,children:e.jsxs("div",{style:s,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("h2",{style:{margin:"0",color:o.colors.red[9]},children:"Farverne betyder"}),e.jsxs("span",{children:[e.jsx("button",{style:i,children:e.jsx(ce,{style:{color:"red",fontSize:"24px"}})}),e.jsx(Se,{onClick:t})]})]}),e.jsxs("ul",{style:{listStyle:"none",padding:"0"},children:[e.jsxs("li",{style:{display:"flex"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:o.colors.green[8],margin:"0 10px",borderRadius:"50%"}}),"Lokalet er frit"]}),e.jsxs("li",{style:{display:"flex"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:o.colors.yellow[8],margin:"0 10px",borderRadius:"50%"}}),"Booket af en studerende"]}),e.jsxs("li",{style:{display:"flex"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:o.colors.red[8],margin:"0 10px",borderRadius:"50%"}}),"Booket af en underviser"]}),e.jsxs("li",{style:{display:"flex"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:o.colors.cyan[8],margin:"0 10px",borderRadius:"50%"}}),"Din valgte booking"]})]})]})})}function Ke(t){return Z({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function Ze(t){return Z({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function Ue({lokale:t}){const[o,n]=j.useState(0),i={"3.9 Open Learning":["img/lokale3-9.jpg","img/lokale3-9-2.jpg","img/lokale3-9-3.jpg"],"3.2":["img/lokale3-2.jpg","img/lokale3-2-2.jpg"]}[t]||[],c=()=>{n((o+1)%i.length)},l=()=>{n((o-1+i.length)%i.length)};return i.length===0?e.jsx("div",{children:" "}):e.jsxs("div",{children:[e.jsx("div",{style:{width:"300px",height:"200px",display:"flex",overflow:"hidden"},children:e.jsx("img",{style:{width:"300px",height:"200px"},src:i[o],alt:`Image of lokale ${t}`})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",width:"364px",position:"relative",bottom:"100px",right:"32px"},children:[e.jsx("button",{className:"Chevron-Knap",onClick:l,children:e.jsx(Ke,{})}),e.jsx("button",{className:"Chevron-Knap",onClick:c,children:e.jsx(Ze,{})})]})]})}const Ye={display:"flex",borderRadius:"9px",background:"#A5D8FF",width:"1164px",padding:"0 35px 26px 30px",position:"relative",justifyContent:"space-between"};function $e({setStepper:t,lokale:o,times:n,setActiveBooking:s,activeBooking:i}){const c=E(),l=R({from:"/BookLokale"}),[p,r]=j.useState({lokale:o,startTime:l.bookingInfo.startTime,endTime:l.bookingInfo.endTime}),[b,d]=j.useState(!1),u=()=>{d(!b)};async function g(){if(p.startTime==null||p.startTime==null||p.startTime==""){alert("Vælg venligst en tid");return}u();const f=await(await fetch("https://nyxkyrlcppkrsubvkytj.supabase.co/rest/v1/currentBookings",{method:"POST",body:JSON.stringify({email:l.userInfo.user.email,user_id:l.userInfo.user.id,bookingDate:l.bookingInfo.date,floor:l.bookingInfo.etage,startTime:p.startTime+":00",endTime:p.endTime+":00",roomNumber:p.lokale}),headers:{"Content-Type":"application/json",Accept:"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55eGt5cmxjcHBrcnN1YnZreXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MjYzMzksImV4cCI6MjA0NzUwMjMzOX0.BUMwwqrzX0kdxKvVf7jd7p31BwDxDf0ZdilcfLh7WlA",Authorization:`Bearer ${l.userInfo.session.access_token}`}})).json();console.log(f)}const[k,h]=j.useState(!1),m=()=>{h(!k)};return e.jsxs("div",{style:Ye,children:[b&&e.jsx(Ne,{onClose:u}),k&&e.jsx(We,{onClose:m}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("h2",{style:{color:c.colors.blue[8],width:"250px"},children:["Grupperum - ",o]}),e.jsx(Ue,{lokale:o})]}),e.jsxs("div",{style:{width:"400px"},children:[e.jsx("h2",{children:"Tider"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:"10%"},children:n.map(a=>e.jsx(De,{start:a.startTime,end:a.endTime,status:a.bookingStatus,setStepper:t,setActiveBooking:s,activeBooking:i,lokale:o,setSelectedInfo:r}))})]}),e.jsx("div",{style:{alignSelf:"center"},children:e.jsx(X,{style:{alignSelf:"center"},onClick:g,className:"BookLokale",radius:"md",size:"xl",color:"indigo",children:"Book lokale"})}),e.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",display:"flex",alignItems:"center"},children:[e.jsx("p",{style:{color:c.colors.blue[8],fontWeight:"bold"},children:"Hvad betyder farverne ?"}),e.jsx("button",{style:{borderColor:"red",marginLeft:"10px"},onClick:m,children:e.jsx(ce,{style:{color:"red",fontSize:"24px"}})})]})]})}function qe({setStepper:t}){const o=E(),n=R({from:"/BookLokale"}),[s,i]=j.useState([]),[c,l]=j.useState(null);async function p(){const d=await(await fetch(`https://nyxkyrlcppkrsubvkytj.supabase.co/rest/v1/currentBookings?bookingDate=eq.${n.bookingInfo.date}&floor=eq.${n.bookingInfo.etage}`,{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55eGt5cmxjcHBrcnN1YnZreXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MjYzMzksImV4cCI6MjA0NzUwMjMzOX0.BUMwwqrzX0kdxKvVf7jd7p31BwDxDf0ZdilcfLh7WlA",Authorization:`Bearer ${n.userInfo.session.access_token}`}})).json();console.log("data",d);const u=[{lokale:"Audiotoriet",etage:"1"},{lokale:"Lobbyen",etage:"1"},{lokale:"3D print",etage:"1"},{lokale:"Medialab",etage:"2"},{lokale:"3.1",etage:"3"},{lokale:"3.2",etage:"3"},{lokale:"3.4",etage:"3"},{lokale:"3.5",etage:"3"},{lokale:"3.6",etage:"3"},{lokale:"3.7",etage:"3"},{lokale:"3.8 Open Learning",etage:"3"},{lokale:"3.9 Open Learning",etage:"3"},{lokale:"3.10",etage:"3"},{lokale:"3.11",etage:"3"}],g=[{startTime:"08:30",endTime:"09:30"},{startTime:"09:30",endTime:"10:30"},{startTime:"10:30",endTime:"11:30"},{startTime:"11:30",endTime:"12:30"},{startTime:"12:30",endTime:"13:30"},{startTime:"13:30",endTime:"14:30"},{startTime:"14:30",endTime:"15:30"},{startTime:"15:30",endTime:"16:30"}],k=[];let h=[];if(d.length===0){for(let m=0;m<u.length;m++)if(u[m].etage==n.bookingInfo.etage){for(let a=0;a<g.length;a++)h.push({startTime:g[a].startTime,endTime:g[a].endTime,bookingStatus:"ledig"});k.push({lokale:u[m].lokale,ableTimes:h}),h=[]}}else for(let m=0;m<u.length;m++)if(u[m].etage==n.bookingInfo.etage){h=[];for(let a=0;a<g.length;a++){let w=!1;for(let f=0;f<d.length;f++)if(g[a].startTime==d[f].startTime.slice(0,-3)&&u[m].lokale==d[f].roomNumber){d[f].isTeacher?h.push({startTime:g[a].startTime,endTime:g[a].endTime,bookingStatus:"teacher"}):h.push({startTime:g[a].startTime,endTime:g[a].endTime,bookingStatus:"optaget"}),w=!0;break}w||h.push({startTime:g[a].startTime,endTime:g[a].endTime,bookingStatus:"ledig"})}k.push({lokale:u[m].lokale,ableTimes:h})}i(k)}return j.useEffect(()=>{p(),(n.bookingInfo.startTime!=null||n.bookingInfo.startTime!=null||n.bookingInfo.startTime!="")&&l(n.bookingInfo.lokale+"-"+n.bookingInfo.startTime)},[]),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"50px"},children:[e.jsxs("h1",{style:{color:o.colors.blue[8]},children:[n.bookingInfo.etage,". Etage og tider for den ",n.bookingInfo.date]}),s.map(r=>e.jsx($e,{lokale:r.lokale,times:r.ableTimes,setStepper:t,activeBooking:c,setActiveBooking:l}))]})}const Ge="_separator_141uf_3",He="_stepIcon_141uf_35",Qe="_step_141uf_35",et={separator:Ge,stepIcon:He,step:Qe},tt={width:"700px"};function ot({active:t}){return e.jsx("div",{children:e.jsxs(S,{style:tt,classNames:et,active:t,children:[e.jsx(S.Step,{description:"Valg af sal og lokale"}),e.jsx(S.Step,{description:"Vælg tidspunkt"}),e.jsx(S.Step,{description:"Booking færdig"})]})})}const at=we("/BookLokale")({component:nt});function nt(){const[t,o]=j.useState("1"),n=R({from:"/BookLokale"});return n.bookingInfo==null||n.bookingInfo==null||n.bookingInfo==""?e.jsx("div",{children:e.jsx(Ce,{to:"/"})}):e.jsxs("div",{style:{margin:"50px auto 0 auto",width:"1164px"},children:[e.jsx(ot,{active:t}),e.jsx(qe,{setStepper:o})]})}export{at as Route};
