import{f as U,u as S,a as V,j as e,B as Z,c as T,r as ve,p as Ce,U as fe,T as we,L as be,g as F,h as Se,i as je,k as ke,l as ze,m as Ne,d as N,N as K,b as Me,e as De}from"./index-B7XlhV3O.js";import{u as _e}from"./useRouteContext-elGRFSXo.js";import{u as Ee,a as Re,I as H,b as X}from"./InputBase-Bf_UwHfI.js";var M={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Q={orientation:"horizontal"},Ae=T((o,{borderWidth:t})=>({group:{"--ai-border-width":ve(t)}})),G=U((o,t)=>{const a=S("ActionIconGroup",Q,o),{className:i,style:d,classNames:l,styles:p,unstyled:r,orientation:v,vars:c,borderWidth:m,variant:h,mod:g,...f}=S("ActionIconGroup",Q,o),s=V({name:"ActionIconGroup",props:a,classes:M,className:i,style:d,classNames:l,styles:p,unstyled:r,vars:c,varsResolver:Ae,rootSelector:"group"});return e.jsx(Z,{...s("group"),ref:t,variant:h,mod:[{"data-orientation":v},g],role:"group",...f})});G.classes=M;G.displayName="@mantine/core/ActionIconGroup";const Le={},Je=T((o,{size:t,radius:a,variant:i,gradient:d,color:l,autoContrast:p})=>{const r=o.variantColorResolver({color:l||o.primaryColor,theme:o,gradient:d,variant:i||"filled",autoContrast:p});return{root:{"--ai-size":F(t,"ai-size"),"--ai-radius":a===void 0?void 0:Se(a),"--ai-bg":l||i?r.background:void 0,"--ai-hover":l||i?r.hover:void 0,"--ai-hover-color":l||i?r.hoverColor:void 0,"--ai-color":r.color,"--ai-bd":l||i?r.border:void 0}}}),D=Ce((o,t)=>{const a=S("ActionIcon",Le,o),{className:i,unstyled:d,variant:l,classNames:p,styles:r,style:v,loading:c,loaderProps:m,size:h,color:g,radius:f,__staticSelector:s,gradient:C,vars:j,children:k,disabled:I,"data-disabled":x,autoContrast:z,mod:w,..._}=a,b=V({name:["ActionIcon",s],props:a,className:i,style:v,classes:M,classNames:p,styles:r,unstyled:d,vars:j,varsResolver:Je});return e.jsxs(fe,{...b("root",{active:!I&&!c&&!x}),..._,unstyled:d,variant:l,size:h,disabled:I||c,ref:t,mod:[{loading:c,disabled:I||x},w],children:[e.jsx(we,{mounted:!!c,transition:"slide-down",duration:150,children:E=>e.jsx(Z,{component:"span",...b("loader",{style:E}),"aria-hidden":!0,children:e.jsx(be,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...m})})}),e.jsx(Z,{component:"span",mod:{loading:c},...b("icon"),children:k})]})});D.classes=M;D.displayName="@mantine/core/ActionIcon";D.Group=G;const Pe=({reveal:o})=>e.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--psi-icon-size)",height:"var(--psi-icon-size)"},children:e.jsx("path",{d:o?"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z":"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})});var O={root:"m_f61ca620",input:"m_ccf8da4c",innerInput:"m_f2d85dd2",visibilityToggle:"m_b1072d44"};const Ze={visibilityToggleIcon:Pe},Fe=T((o,{size:t})=>({root:{"--psi-icon-size":F(t,"psi-icon-size"),"--psi-button-size":F(t,"psi-button-size")}})),$=U((o,t)=>{const a=S("PasswordInput",Ze,o),{classNames:i,className:d,style:l,styles:p,unstyled:r,vars:v,required:c,error:m,leftSection:h,disabled:g,id:f,variant:s,inputContainer:C,description:j,label:k,size:I,errorProps:x,descriptionProps:z,labelProps:w,withAsterisk:_,inputWrapperOrder:b,wrapperProps:E,radius:B,rightSection:se,rightSectionWidth:oe,rightSectionPointerEvents:te,leftSectionWidth:ae,visible:re,defaultVisible:ne,onVisibilityChange:ie,visibilityToggleIcon:le,visibilityToggleButtonProps:n,rightSectionProps:ce,leftSectionProps:de,leftSectionPointerEvents:pe,withErrorStyles:ue,mod:me,...he}=a,R=je(f),[A,ge]=Ee({value:re,defaultValue:ne,finalValue:!1,onChange:ie}),L=()=>ge(!A),J=V({name:"PasswordInput",classes:O,props:a,className:d,style:l,classNames:i,styles:p,unstyled:r,vars:v,varsResolver:Fe}),{resolvedClassNames:P,resolvedStyles:W}=Re({classNames:i,styles:p,props:a}),{styleProps:Ie,rest:Y}=ke(he),xe=le,ye=e.jsx(D,{...J("visibilityToggle"),disabled:g,radius:B,"aria-hidden":!n,tabIndex:-1,...n,variant:"subtle",color:"gray",unstyled:r,onTouchEnd:u=>{var y;u.preventDefault(),(y=n==null?void 0:n.onTouchEnd)==null||y.call(n,u),L()},onMouseDown:u=>{var y;u.preventDefault(),(y=n==null?void 0:n.onMouseDown)==null||y.call(n,u),L()},onKeyDown:u=>{var y;(y=n==null?void 0:n.onKeyDown)==null||y.call(n,u),u.key===" "&&(u.preventDefault(),L())},children:e.jsx(xe,{reveal:A})});return e.jsx(H.Wrapper,{required:c,id:R,label:k,error:m,description:j,size:I,classNames:P,styles:W,__staticSelector:"PasswordInput",errorProps:x,descriptionProps:z,unstyled:r,withAsterisk:_,inputWrapperOrder:b,inputContainer:C,variant:s,labelProps:{...w,htmlFor:R},mod:me,...J("root"),...Ie,...E,children:e.jsx(H,{component:"div",error:m,leftSection:h,size:I,classNames:{...P,input:ze(O.input,P.input)},styles:W,radius:B,disabled:g,__staticSelector:"PasswordInput",rightSectionWidth:oe,rightSection:se??ye,variant:s,unstyled:r,leftSectionWidth:ae,rightSectionPointerEvents:te||"all",rightSectionProps:ce,leftSectionProps:de,leftSectionPointerEvents:pe,withAria:!1,withErrorStyles:ue,children:e.jsx("input",{required:c,"data-invalid":!!m||void 0,"data-with-left-section":!!h||void 0,...J("innerInput"),disabled:g,id:R,ref:t,...Y,autoComplete:Y.autoComplete||"off",type:A?"text":"password"})})})});$.classes={...X.classes,...O};$.displayName="@mantine/core/PasswordInput";const Oe={},q=U((o,t)=>{const a=S("TextInput",Oe,o);return e.jsx(X,{component:"input",ref:t,...a,__staticSelector:"TextInput"})});q.classes=X.classes;q.displayName="@mantine/core/TextInput";const Ue="https://nyxkyrlcppkrsubvkytj.supabase.co",Ve="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55eGt5cmxjcHBrcnN1YnZreXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MjYzMzksImV4cCI6MjA0NzUwMjMzOX0.BUMwwqrzX0kdxKvVf7jd7p31BwDxDf0ZdilcfLh7WlA",Te=Ne(Ue,Ve),Xe={backgroundColor:"#F59F00",marginTop:"40px",color:"black"},ee={width:"690px",marginTop:"55px",color:"#364FC7"};function Ge(){const o=_e({from:"/login"}),t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55eGt5cmxjcHBrcnN1YnZreXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MjYzMzksImV4cCI6MjA0NzUwMjMzOX0.BUMwwqrzX0kdxKvVf7jd7p31BwDxDf0ZdilcfLh7WlA",[a,i]=N.useState(""),[d,l]=N.useState(""),[p,r]=N.useState(""),[v,c]=N.useState("");async function m(){const{data:s,error:C}=await Te.auth.signInWithPassword({email:a,password:d}).then(),I={userdata:(await(await fetch(`https://nyxkyrlcppkrsubvkytj.supabase.co/rest/v1/userData?user_id=eq.${s.user.id}`,{headers:{apikey:t,Authorization:`Bearer ${s.session.access_token}`}}).then()).json())[0]},x={...s,...I};o.setUserInfo(x),console.log("data",x),localStorage.setItem("token",JSON.stringify(x));const z=Date.now()+3e6;localStorage.setItem("tokenTime",z),C!=null&&(console.log("error",C),r(C.message),c(C.message));const w=new Date().toISOString().split("T")[0];return await fetch(`https://nyxkyrlcppkrsubvkytj.supabase.co/rest/v1/currentBookings?user_id=eq.${s.user.id}&bookingDate=lt.${w}`,{method:"DELETE",headers:{apikey:t,Authorization:`Bearer ${s.session.access_token}`}}),e.jsx(K,{to:"/"})}const h=s=>{s.preventDefault(),console.log(a,d),m()};function g(s){i(s.target.value),r(null)}function f(s){l(s.target.value),c(null)}return Date.now()<localStorage.getItem("tokenTime")?(o.setUserInfo(JSON.parse(localStorage.getItem("token"))),console.log("token not expired"),console.log(JSON.parse(localStorage.getItem("token"))),e.jsx(K,{to:"/"})):(console.log("token expired"),e.jsxs("div",{children:[e.jsx("h1",{style:{color:"#364FC7"},children:"Login"}),e.jsxs("form",{children:[e.jsx(q,{size:"xl",radius:"xs",label:"Mail",placeholder:"cph-business mail",type:"text",value:a,onChange:s=>g(s),style:ee,error:p,required:!0}),e.jsx($,{size:"xl",radius:"xs",label:"Kode",placeholder:"Adgangskode",value:d,onChange:s=>f(s),type:"password",style:ee,error:v,required:!0}),e.jsx(Me,{type:"submit",onClick:h,variant:"filled",color:"#F08C00",size:"xl",radius:"md",style:Xe,children:"LOGIN"})]})]}))}const Ke=De("/login")({component:qe}),$e={display:"flex",marginLeft:"138px",marginRight:"612px",marginTop:"181px",backgroundColor:"#D0EBFF"};function qe(){return e.jsxs("div",{style:$e,children:[e.jsx(Ge,{}),e.jsx("img",{style:{width:"449px",height:"427px",marginTop:"15px"},src:"img/login-illustation.png",alt:"Illustration"})]})}export{Ke as Route};
