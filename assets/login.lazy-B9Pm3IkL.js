import{f as $,u as N,a as G,j as e,B as F,c as J,r as fe,p as Ce,U as Ie,T as we,L as be,g as U,h as Se,i as je,k as ke,l as ze,m as Ne,d as b,N as _e,b as De,e as Ee}from"./index-CLUF5fww.js";import{u as Re}from"./useRouteContext-7sMlSsiM.js";import{u as Ae,a as Me,I as H,b as O}from"./InputBase-CtzQX3ld.js";var D={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Q={orientation:"horizontal"},Pe=J((s,{borderWidth:o})=>({group:{"--ai-border-width":fe(o)}})),q=$((s,o)=>{const n=N("ActionIconGroup",Q,s),{className:i,style:p,classNames:l,styles:d,unstyled:r,orientation:h,vars:c,borderWidth:u,variant:g,mod:x,...I}=N("ActionIconGroup",Q,s),y=G({name:"ActionIconGroup",props:n,classes:D,className:i,style:p,classNames:l,styles:d,unstyled:r,vars:c,varsResolver:Pe,rootSelector:"group"});return e.jsx(F,{...y("group"),ref:o,variant:g,mod:[{"data-orientation":h},x],role:"group",...I})});q.classes=D;q.displayName="@mantine/core/ActionIconGroup";const Le={},Te=J((s,{size:o,radius:n,variant:i,gradient:p,color:l,autoContrast:d})=>{const r=s.variantColorResolver({color:l||s.primaryColor,theme:s,gradient:p,variant:i||"filled",autoContrast:d});return{root:{"--ai-size":U(o,"ai-size"),"--ai-radius":n===void 0?void 0:Se(n),"--ai-bg":l||i?r.background:void 0,"--ai-hover":l||i?r.hover:void 0,"--ai-hover-color":l||i?r.hoverColor:void 0,"--ai-color":r.color,"--ai-bd":l||i?r.border:void 0}}}),E=Ce((s,o)=>{const n=N("ActionIcon",Le,s),{className:i,unstyled:p,variant:l,classNames:d,styles:r,style:h,loading:c,loaderProps:u,size:g,color:x,radius:I,__staticSelector:y,gradient:t,vars:v,children:_,disabled:C,"data-disabled":w,autoContrast:S,mod:j,...k}=n,z=G({name:["ActionIcon",y],props:n,className:i,style:h,classes:D,classNames:d,styles:r,unstyled:p,vars:v,varsResolver:Te});return e.jsxs(Ie,{...z("root",{active:!C&&!c&&!w}),...k,unstyled:p,variant:l,size:g,disabled:C||c,ref:o,mod:[{loading:c,disabled:C||w},j],children:[e.jsx(we,{mounted:!!c,transition:"slide-down",duration:150,children:R=>e.jsx(F,{component:"span",...z("loader",{style:R}),"aria-hidden":!0,children:e.jsx(be,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u})})}),e.jsx(F,{component:"span",mod:{loading:c},...z("icon"),children:_})]})});E.classes=D;E.displayName="@mantine/core/ActionIcon";E.Group=q;const Fe=({reveal:s})=>e.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--psi-icon-size)",height:"var(--psi-icon-size)"},children:e.jsx("path",{d:s?"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z":"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})});var V={root:"m_f61ca620",input:"m_ccf8da4c",innerInput:"m_f2d85dd2",visibilityToggle:"m_b1072d44"};const Ue={visibilityToggleIcon:Fe},Ve=J((s,{size:o})=>({root:{"--psi-icon-size":U(o,"psi-icon-size"),"--psi-button-size":U(o,"psi-button-size")}})),W=$((s,o)=>{const n=N("PasswordInput",Ue,s),{classNames:i,className:p,style:l,styles:d,unstyled:r,vars:h,required:c,error:u,leftSection:g,disabled:x,id:I,variant:y,inputContainer:t,description:v,label:_,size:C,errorProps:w,descriptionProps:S,labelProps:j,withAsterisk:k,inputWrapperOrder:z,wrapperProps:R,radius:K,rightSection:se,rightSectionWidth:te,rightSectionPointerEvents:oe,leftSectionWidth:ae,visible:re,defaultVisible:ne,onVisibilityChange:ie,visibilityToggleIcon:le,visibilityToggleButtonProps:a,rightSectionProps:ce,leftSectionProps:de,leftSectionPointerEvents:pe,withErrorStyles:ue,mod:me,...he}=n,A=je(I),[M,ge]=Ae({value:re,defaultValue:ne,finalValue:!1,onChange:ie}),P=()=>ge(!M),L=G({name:"PasswordInput",classes:V,props:n,className:p,style:l,classNames:i,styles:d,unstyled:r,vars:h,varsResolver:Ve}),{resolvedClassNames:T,resolvedStyles:B}=Me({classNames:i,styles:d,props:n}),{styleProps:xe,rest:Y}=ke(he),ye=le,ve=e.jsx(E,{...L("visibilityToggle"),disabled:x,radius:K,"aria-hidden":!a,tabIndex:-1,...a,variant:"subtle",color:"gray",unstyled:r,onTouchEnd:m=>{var f;m.preventDefault(),(f=a==null?void 0:a.onTouchEnd)==null||f.call(a,m),P()},onMouseDown:m=>{var f;m.preventDefault(),(f=a==null?void 0:a.onMouseDown)==null||f.call(a,m),P()},onKeyDown:m=>{var f;(f=a==null?void 0:a.onKeyDown)==null||f.call(a,m),m.key===" "&&(m.preventDefault(),P())},children:e.jsx(ye,{reveal:M})});return e.jsx(H.Wrapper,{required:c,id:A,label:_,error:u,description:v,size:C,classNames:T,styles:B,__staticSelector:"PasswordInput",errorProps:w,descriptionProps:S,unstyled:r,withAsterisk:k,inputWrapperOrder:z,inputContainer:t,variant:y,labelProps:{...j,htmlFor:A},mod:me,...L("root"),...xe,...R,children:e.jsx(H,{component:"div",error:u,leftSection:g,size:C,classNames:{...T,input:ze(V.input,T.input)},styles:B,radius:K,disabled:x,__staticSelector:"PasswordInput",rightSectionWidth:te,rightSection:se??ve,variant:y,unstyled:r,leftSectionWidth:ae,rightSectionPointerEvents:oe||"all",rightSectionProps:ce,leftSectionProps:de,leftSectionPointerEvents:pe,withAria:!1,withErrorStyles:ue,children:e.jsx("input",{required:c,"data-invalid":!!u||void 0,"data-with-left-section":!!g||void 0,...L("innerInput"),disabled:x,id:A,ref:o,...Y,autoComplete:Y.autoComplete||"off",type:M?"text":"password"})})})});W.classes={...O.classes,...V};W.displayName="@mantine/core/PasswordInput";const Ze={},X=$((s,o)=>{const n=N("TextInput",Ze,s);return e.jsx(O,{component:"input",ref:o,...n,__staticSelector:"TextInput"})});X.classes=O.classes;X.displayName="@mantine/core/TextInput";const $e="https://nyxkyrlcppkrsubvkytj.supabase.co",Z="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55eGt5cmxjcHBrcnN1YnZreXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MjYzMzksImV4cCI6MjA0NzUwMjMzOX0.BUMwwqrzX0kdxKvVf7jd7p31BwDxDf0ZdilcfLh7WlA",Ge=Ne($e,Z),Je={backgroundColor:"#F59F00",marginTop:"40px",color:"black"},ee={width:"690px",marginTop:"55px",color:"#364FC7"};function Oe(){const s=Re({from:"/login"}),[o,n]=b.useState(""),[i,p]=b.useState(""),[l,d]=b.useState(""),[r,h]=b.useState(""),[c,u]=b.useState(!1);async function g(){const{data:t,error:v}=await Ge.auth.signInWithPassword({email:o,password:i}).then();if(v){console.log("error",v),d(v.message),h(v.message);return}const w={userdata:(await(await fetch(`https://nyxkyrlcppkrsubvkytj.supabase.co/rest/v1/userData?user_id=eq.${t.user.id}`,{headers:{apikey:Z,Authorization:`Bearer ${t.session.access_token}`}}).then()).json())[0]},S={...t,...w};s.setUserInfo(S),localStorage.setItem("token",JSON.stringify(S));const j=Date.now()+3e6;localStorage.setItem("tokenTime",j);const k=new Date().toISOString().split("T")[0];await fetch(`https://nyxkyrlcppkrsubvkytj.supabase.co/rest/v1/currentBookings?user_id=eq.${t.user.id}&bookingDate=lt.${k}`,{method:"DELETE",headers:{apikey:Z,Authorization:`Bearer ${t.session.access_token}`}}),u(!0)}const x=t=>{t.preventDefault(),g()};function I(t){n(t.target.value),d(null)}function y(t){p(t.target.value),h(null)}return b.useEffect(()=>{Date.now()<localStorage.getItem("tokenTime")&&(console.log(JSON.parse(localStorage.getItem("token"))),s.setUserInfo(JSON.parse(localStorage.getItem("token"))),console.log("token not expired"),u(!0))}),e.jsxs("div",{children:[c&&e.jsx(_e,{to:"/"}),e.jsx("h1",{style:{color:"#364FC7"},children:"Login"}),e.jsxs("form",{children:[e.jsx(X,{size:"xl",radius:"xs",label:"Mail",placeholder:"cph-business mail",type:"text",value:o,onChange:t=>I(t),style:ee,error:l,required:!0}),e.jsx(W,{size:"xl",radius:"xs",label:"Kode",placeholder:"Adgangskode",value:i,onChange:t=>y(t),type:"password",style:ee,error:r,required:!0}),e.jsx(De,{type:"submit",onClick:x,variant:"filled",color:"#F08C00",size:"xl",radius:"md",style:Je,children:"LOGIN"})]})]})}const Ye=Ee("/login")({component:We}),qe={display:"flex",marginLeft:"138px",marginRight:"612px",marginTop:"50px",backgroundColor:"#D0EBFF"};function We(){return e.jsxs("div",{style:qe,children:[e.jsx(Oe,{}),e.jsx("img",{style:{width:"449px",height:"427px",marginTop:"15px"},src:"img/login-illustation.png",alt:"Illustration"})]})}export{Ye as Route};
