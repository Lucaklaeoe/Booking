import{r as w,f as z,u as B,a as S,j as e,B as R,c as F,b as f,d as g,e as D,N as A}from"./index-BXZolbYv.js";import{u as y}from"./useRouteContext-PqhY9Wp2.js";const E=["h1","h2","h3","h4","h5","h6"],M=["xs","sm","md","lg","xl"];function $(t,i){const n=i!==void 0?i:`h${t}`;return E.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:M.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}:{fontSize:w(n),fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}}var k={root:"m_8a5d1357"};const J={order:1},L=F((t,{order:i,size:n,lineClamp:s,textWrap:r})=>{const o=$(i,n);return{root:{"--title-fw":o.fontWeight,"--title-lh":o.lineHeight,"--title-fz":o.fontSize,"--title-line-clamp":typeof s=="number"?s.toString():void 0,"--title-text-wrap":r}}}),m=z((t,i)=>{const n=B("Title",J,t),{classNames:s,className:r,style:o,styles:a,unstyled:l,order:c,vars:d,size:u,variant:x,lineClamp:h,textWrap:j,mod:C,...v}=n,I=S({name:"Title",props:n,classes:k,className:r,style:o,classNames:s,styles:a,unstyled:l,vars:d,varsResolver:L});return[1,2,3,4,5,6].includes(c)?e.jsx(R,{...I("root"),component:`h${c}`,variant:x,ref:i,mod:[{order:c,"data-line-clamp":typeof h=="number"},C],size:u,...v}):null});m.classes=k;m.displayName="@mantine/core/Title";const N={display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:" 3"},W={display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",backgroundColor:"#FFF",bordorRadius:"4px",padding:"26px 55px",width:"762px"},b={color:"white"};function T({onClose:t,onConfirm:i,starttid:n,sluttid:s,id:r,setUserBookingData:o}){const a=y({from:"/ownBooking"});function l(){c(r)}async function c(d){console.log(a),(await fetch(`https://nyxkyrlcppkrsubvkytj.supabase.co/rest/v1/currentBookings?id=eq.${d}`,{method:"DELETE",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55eGt5cmxjcHBrcnN1YnZreXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MjYzMzksImV4cCI6MjA0NzUwMjMzOX0.BUMwwqrzX0kdxKvVf7jd7p31BwDxDf0ZdilcfLh7WlA",Authorization:`Bearer ${a.userInfo.session.access_token}`,"Content-Type":"application/json",Prefer:"return=representation"}})).ok&&(console.log("booking deleted"),i())}return e.jsx("div",{style:N,children:e.jsxs("div",{style:W,children:[e.jsx("h1",{style:{color:"#364FC7"},children:"Vil du annullere din bookning?"}),e.jsxs("p",{style:{color:"black"},children:["Din booking ",n," til ",s," vil blive annulleret "]}),e.jsxs("div",{style:{display:"flex",gap:"100px",marginTop:"30px"},children:[e.jsx(f,{onClick:l,variant:"filled",color:"#2B8A3E",size:"lg",radius:"md",style:b,children:"Ja"}),e.jsx(f,{onClick:t,variant:"filled",color:"#C92A2A",size:"lg",radius:"md",style:b,children:"Nej"})]})]})})}const X={display:"flex",justifyContent:"center",alignItems:"center",position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:" 3"},O={display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",backgroundColor:"#FFF",bordorRadius:"4px",padding:"26px 55px",width:"762px"},Z={backgroundColor:"#F59F00",marginTop:"29px",color:"black"};function P({onClose:t,starttid:i,sluttid:n}){return e.jsx("div",{style:X,children:e.jsxs("div",{style:O,children:[e.jsx("h1",{style:{color:"#2B8A3E"},children:"Bookning annulleret"}),e.jsxs("p",{style:{color:"black"},children:["Din booking ",i," til ",n," vil blive annulleret "]}),e.jsx(f,{onClick:t,type:"submit",variant:"filled",color:"#F08C00",size:"xl",radius:"md",style:Z,children:"Til bookningner"})]})})}const V={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 38px",color:"white",position:"relative",background:"#A5D8FF",borderBottomLeftRadius:"2px",borderBottomRightRadius:"2px",height:"112px",borderBottom:"2px solid #74C0FC"},p={width:"20%",fontSize:"22px",fontWeight:"700",height:"32px",display:"flex",alignItems:"center"};function U({id:t,dato:i,lokale:n,starttid:s,sluttid:r,setUserBookingData:o}){const[a,l]=g.useState(null),c=()=>l(null),d=()=>l("cancellation"),u=()=>l("confirm"),x=()=>{o(h=>h.filter(j=>j.id!==t)),l(null)};return e.jsxs("div",{style:V,children:[e.jsx("div",{style:p,children:e.jsx("p",{style:{backgroundColor:"#1C7ED6",padding:"10px",borderRadius:"6px"},children:i})}),e.jsx("div",{style:p,children:e.jsx("p",{style:{backgroundColor:"#1C7ED6",padding:"10px",borderRadius:"6px"},children:n})}),e.jsx("div",{style:p,children:e.jsx("p",{style:{backgroundColor:"#1C7ED6",padding:"10px",borderRadius:"6px"},children:s})}),e.jsx("div",{style:p,children:e.jsxs("p",{style:{backgroundColor:"#1C7ED6",padding:"10px",borderRadius:"6px"},children:[" ",r]})}),e.jsx("div",{id:t,style:{...p,cursor:"pointer"},children:e.jsx("button",{onClick:d,style:{backgroundColor:"#C92A2A",padding:"10px",borderRadius:"6px",color:"white",border:"none"},children:" Annuller booking"})}),a==="cancellation"&&e.jsx(T,{onClose:c,onConfirm:u,starttid:s,sluttid:r,id:t,setUserBookingData:o}),a==="confirm"&&e.jsx(P,{onClose:x,starttid:s,sluttid:r})]})}const Y={display:"flex",alignItems:"center",justifyContent:"space-between",witdh:"100%",height:"70px",borderRadius:"10px",padding:"0 38px",color:"white",position:"relative",background:"#364FC7"},q={margin:"-20px 0",borderLeft:"2px solid #74C0FC",borderRight:"2px solid #74C0FC",padding:"20px 0 0 0",background:"#A5D8FF",display:"flex",flexDirection:"column",borderBottomLeftRadius:"2px",borderBottomRightRadius:"px"};function H(){const[t,i]=g.useState([]),n=y({from:"/ownBooking"}),s=n.userInfo.user.id,r=async()=>{const l=await(await fetch(`https://nyxkyrlcppkrsubvkytj.supabase.co/rest/v1/currentBookings?user_id=eq.${s}`,{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55eGt5cmxjcHBrcnN1YnZreXRqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MjYzMzksImV4cCI6MjA0NzUwMjMzOX0.BUMwwqrzX0kdxKvVf7jd7p31BwDxDf0ZdilcfLh7WlA",Authorization:`Bearer ${n.userInfo.session.access_token}`,Prefer:"return=representation","content-type":"application/json"}})).json();i(l)};return g.useEffect(()=>{r()},[]),e.jsxs("div",{children:[e.jsxs("div",{style:Y,children:[e.jsx("p",{style:{width:"20%",fontSize:"22px",fontWeight:"700"},children:"Dato"}),e.jsx("p",{style:{width:"20%",fontSize:"22px",fontWeight:"700"},children:"Lokale"}),e.jsx("p",{style:{width:"20%",fontSize:"22px",fontWeight:"700"},children:"Start tid"}),e.jsx("p",{style:{width:"20%",fontSize:"22px",fontWeight:"700"},children:"Slut tid"}),e.jsx("p",{style:{width:"20%",fontSize:"22px",fontWeight:"700"},children:"Annuller booking"})]}),e.jsx("div",{style:q,children:t.map(o=>e.jsx(U,{id:o.id,dato:o.bookingDate,lokale:o.roomNumber,starttid:o.startTime,sluttid:o.endTime,setUserBookingData:i},o.id))})]})}const ee=D("/ownBooking")({component:_}),K={margin:"100px auto 0 auto",width:"1164px"};function _(){const t=y({from:"/ownBooking"});return t.userInfo==null||t.userInfo==null||t.userInfo==""?e.jsx("div",{children:e.jsx(A,{to:"/login"})}):e.jsxs("div",{style:K,children:[e.jsx(m,{order:1,style:{color:"#364FC7"},children:"Dine bookinger"}),e.jsx(H,{})]})}export{ee as Route};
